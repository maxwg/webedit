<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8"/>
    <title>WebEdit</title>
    <script src="main.js"></script>
</head>
<body>
<script>
    var urlParams;// LOAD URL PARAMS
    (window.onpopstate = function () {
        var match,
                pl     = /\+/g,  // Regex for replacing addition symbol with a space
                search = /([^&=]+)=?([^&]*)/g,
                decode = function (s) { return decodeURIComponent(s.replace(pl, " ")); },
                query  = window.location.search.substring(1);

        urlParams = {};
        while (match = search.exec(query))
            urlParams[decode(match[1])] = decode(match[2]);

        var offsets;
        if(typeof(urlParams.offsets)!="undefined"){
            offsets = JSON.parse(urlParams.offsets);
        }
        init(urlParams.img, {
            offsets:offsets,
            title: "Removed "+urlParams.removed,
            removed: urlParams.removed,
            others: urlParams.others,
            base: urlParams.base,
            task: urlParams.task,
            id: urlParams.id
        });

    })();
//    var hash = window.location.hash;
//	console.log(hash);
//    if (hash)
//        init(hash.slice(1), urlParams.offsets);
//    else
//        init("res/img.jpg", urlParams.offsets);

</script>
</body>
</html>